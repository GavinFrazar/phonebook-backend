{"version":3,"sources":["components/ControlledInput.js","components/Filter.js","components/PersonForm.js","components/Numbers.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["ControlledInput","state","setState","label","onChange","e","target","value","Filter","filter","setFilter","PersonForm","newName","setNewName","newNumber","setNewNumber","handleSubmit","onSubmit","type","Person","person","handleDeletion","name","number","onClick","Numbers","persons","map","key","Notification","notification","msg","classes","isError","join","className","baseUrl","responseToData","promise","then","response","data","axios","post","id","put","get","delete","App","useState","setPersons","setNotification","displayNotification","timeout","setTimeout","useEffect","personService","handleStaleDelete","stalePerson","filteredPersons","toLocaleLowerCase","includes","preventDefault","personUpdate","existingPerson","find","window","confirm","returnedPerson","catch","err","status","error","finally","concat","deletedPerson","returnedDeletedPerson","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.851ee836.chunk.js","sourcesContent":["import React from \"react\";\n\nconst ControlledInput = ({ state, setState, label }) => {\n  return (\n    <div>\n      {label}\n      <input onChange={(e) => setState(e.target.value)} value={state} />\n    </div>\n  );\n};\n\nexport default ControlledInput;\n","import React from \"react\";\nimport ControlledInput from \"./ControlledInput\";\n\nconst Filter = ({ filter, setFilter }) => {\n  return (\n    <ControlledInput\n      state={filter}\n      setState={setFilter}\n      label=\"filter shown with \"\n    />\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\nimport ControlledInput from \"./ControlledInput\";\n\nconst PersonForm = ({\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  handleSubmit,\n}) => {\n  return (\n    <form onSubmit={handleSubmit}>\n      <ControlledInput state={newName} setState={setNewName} label=\"name: \" />\n      <ControlledInput\n        state={newNumber}\n        setState={setNewNumber}\n        label=\"number: \"\n      />\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Numbers = ({ persons, handleDeletion }) => {\n  return persons.map((person) => (\n    <Person\n      person={person}\n      key={person.name}\n      handleDeletion={() => handleDeletion(person)}\n    />\n  ));\n};\n\nconst Person = ({ person, handleDeletion }) => {\n  return (\n    <div>\n      {person.name} {person.number}\n      <button onClick={handleDeletion}>delete</button>\n    </div>\n  );\n};\n\nexport default Numbers;\n","import React from \"react\";\n\nconst Notification = ({ notification }) => {\n  if (notification === null) {\n    return null;\n  }\n  const { msg, isError } = notification;\n  const classes = [\"notification\", isError ? \"error\" : \"\"].join(\" \");\n  return <div className={classes}>{msg}</div>;\n};\n\nexport default Notification;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst responseToData = (promise) => promise.then((response) => response.data);\n\nconst create = (person) => {\n  return responseToData(axios.post(baseUrl, person));\n};\n\nconst update = (id, person) => {\n  return responseToData(axios.put(`${baseUrl}/${id}`, person));\n};\n\nconst getAll = () => {\n  return responseToData(axios.get(baseUrl));\n};\n\nconst remove = (id) => {\n  return responseToData(axios.delete(`${baseUrl}/${id}`));\n};\n\nexport default {\n  create,\n  update,\n  getAll,\n  remove,\n};\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Numbers from \"./components/Numbers\";\nimport Notification from \"./components/Notification\";\n\nimport personService from \"./services/persons\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [notification, setNotification] = useState(null);\n\n  const displayNotification = (msg, timeout, isError = false) => {\n    setNotification({ msg, isError });\n    setTimeout(() => {\n      setNotification(null);\n    }, timeout);\n  };\n\n  useEffect(() => {\n    personService.getAll().then((persons) => {\n      setPersons(persons);\n    });\n  }, []);\n\n  const handleStaleDelete = (stalePerson) => {\n    displayNotification(\n      `${stalePerson.name} has already been removed from server`,\n      5000,\n      true\n    );\n  };\n\n  const handleUpdate = (personUpdate) => {\n    personService\n      .update(personUpdate.id, { ...personUpdate, number: newNumber })\n      .then((returnedPerson) => {\n        setPersons(\n          persons.map((person) =>\n            person.id !== personUpdate.id ? person : returnedPerson\n          )\n        );\n        displayNotification(`Updated ${returnedPerson.name}`, 5000);\n      })\n      .catch((err) => {\n        if (err.response.status === 404) {\n          handleStaleDelete(personUpdate);\n          setPersons(persons.filter((person) => person.id !== personUpdate.id));\n        } else if (err.response.status === 400) {\n          displayNotification(`${err.response.data.error}`, 5000, true);\n        }\n      })\n      .finally(() => {\n        setNewName(\"\");\n        setNewNumber(\"\");\n      });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const existingPerson = persons.find((person) => person.name === newName);\n    if (existingPerson) {\n      const confirm = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (confirm) {\n        handleUpdate(existingPerson);\n      }\n      return;\n    }\n    const newPerson = { name: newName, number: newNumber };\n    personService\n      .create(newPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        displayNotification(`Added ${returnedPerson.name}`, 5000);\n      })\n      .catch((err) => {\n        displayNotification(`${err.response.data.error}`, 5000, true);\n      });\n  };\n\n  const handleDeletion = (deletedPerson) => {\n    if (window.confirm(`Delete ${deletedPerson.name} ?`)) {\n      personService\n        .remove(deletedPerson.id)\n        .then((returnedDeletedPerson) => {\n          displayNotification(`Removed ${deletedPerson.name}`, 5000);\n        })\n        .catch((err) => handleStaleDelete(deletedPerson))\n        .finally(() => {\n          setPersons(\n            persons.filter((person) => person.id !== deletedPerson.id)\n          );\n        });\n    }\n  };\n\n  const filteredPersons = persons.filter((person) =>\n    person.name.toLocaleLowerCase().includes(filter.toLocaleLowerCase())\n  );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter {...{ filter, setFilter }} />\n      <h2>add a new</h2>\n      <PersonForm\n        {...{\n          newName,\n          setNewName,\n          newNumber,\n          setNewNumber,\n          handleSubmit,\n        }}\n      />\n      <h2>Numbers</h2>\n      <Numbers persons={filteredPersons} handleDeletion={handleDeletion} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}